# Tools/visitor_tracking_tools/mixpanel_tool.py

from mixpanel import Mixpanel
from ..Engines.constants import MIXPANEL_TOKEN
from ..Engines.logger import get_logger

logger = get_logger(__name__)

class MixpanelTool:
    """
    Track events & user profiles in Mixpanel.
    """

    def __init__(self):
        self.mp = Mixpanel(MIXPANEL_TOKEN)

    def track(self, distinct_id: str, event_name: str, properties: dict = None):
        logger.info(f"Mixpanel track: {event_name} for {distinct_id}")
        self.mp.track(distinct_id, event_name, properties or {})

    def set_profile(self, distinct_id: str, properties: dict):
        logger.info(f"Mixpanel set profile for {distinct_id}")
        self.mp.people_set(distinct_id, properties)
